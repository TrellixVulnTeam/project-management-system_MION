(self.webpackChunkfirst_project=self.webpackChunkfirst_project||[]).push([[523],{5523:(t,e,i)=>{"use strict";i.r(e),i.d(e,{MembersInProjectModule:()=>W});var o=i(8583),n=i(4655),a=i(8345),s=i(4457),r=i(2789),l=i(2238),c=i(2153),u=i(7716),m=i(4981),d=i(9472),g=i(674),Z=i(7573),h=i(6649),p=i(3679),f=i(8295),A=i(9983),T=i(7441),q=i(2458),b=i(1095),U=i(6627);function v(t,e){1&t&&(u.TgZ(0,"div",45),u.TgZ(1,"strong"),u._uU(2,"Success!"),u.qZA(),u._uU(3," Update Success!! "),u.TgZ(4,"button",46),u.TgZ(5,"span",47),u._uU(6,"\xd7"),u.qZA(),u.qZA(),u.qZA())}function _(t,e){if(1&t&&(u.TgZ(0,"button",48),u._uU(1," Add Members "),u.qZA()),2&t){const t=u.oxw();u.MGl("routerLink","/project-manager/add-user/",t.projectId,"")}}function S(t,e){1&t&&(u.TgZ(0,"th",49),u._uU(1," STT "),u.qZA())}function C(t,e){if(1&t&&(u.TgZ(0,"td",50),u._uU(1),u.qZA()),2&t){const t=e.index;u.xp6(1),u.hij(" ",t+1," ")}}function w(t,e){1&t&&(u.TgZ(0,"th",49),u._uU(1," Id "),u.qZA())}function N(t,e){if(1&t&&(u.TgZ(0,"td",50),u._uU(1),u.qZA()),2&t){const t=e.$implicit;u.xp6(1),u.hij(" ",t.user.id," ")}}function k(t,e){1&t&&(u.TgZ(0,"th",49),u._uU(1," Full Name "),u.qZA())}function x(t,e){if(1&t&&(u.TgZ(0,"td",50),u._uU(1),u.qZA()),2&t){const t=e.$implicit;u.xp6(1),u.hij(" ",t.user.fullName," ")}}function D(t,e){1&t&&(u.TgZ(0,"th",49),u._uU(1," Email "),u.qZA())}function y(t,e){if(1&t&&(u.TgZ(0,"td",50),u._uU(1),u.qZA()),2&t){const t=e.$implicit;u.xp6(1),u.hij(" ",t.user.email," ")}}function Y(t,e){1&t&&(u.TgZ(0,"th",49),u._uU(1," Role"),u.qZA())}function j(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"td",51),u.TgZ(1,"mat-form-field"),u.TgZ(2,"mat-select",52),u.NdJ("valueChange",function(e){return u.CHM(t).$implicit.role=e}),u.TgZ(3,"mat-option",16),u._uU(4,"Leader"),u.qZA(),u.TgZ(5,"mat-option",17),u._uU(6,"Developer"),u.qZA(),u.TgZ(7,"mat-option",53),u._uU(8,"Admin"),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&t){const t=e.$implicit;u.xp6(2),u.Q6J("value",t.role)}}function J(t,e){1&t&&(u.TgZ(0,"th",49),u._uU(1," Status "),u.qZA())}const I=function(t){return{background:t}};function M(t,e){if(1&t&&(u.TgZ(0,"span",55),u._uU(1,"active"),u.qZA()),2&t){const t=u.oxw(2);u.Q6J("ngStyle",u.VKq(1,I,t.getStatus.getTheColor("active")))}}function Q(t,e){if(1&t&&(u.TgZ(0,"span",55),u._uU(1,"delete"),u.qZA()),2&t){const t=u.oxw(2);u.Q6J("ngStyle",u.VKq(1,I,t.getStatus.getTheColor("delete")))}}function P(t,e){if(1&t&&(u.TgZ(0,"td",50),u.YNc(1,M,2,3,"span",54),u.YNc(2,Q,2,3,"span",54),u.qZA()),2&t){const t=e.$implicit;u.xp6(1),u.Q6J("ngIf",!t.delete),u.xp6(1),u.Q6J("ngIf",t.delete)}}function B(t,e){1&t&&(u.TgZ(0,"th",49),u._uU(1," Action "),u.qZA())}function F(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"span"),u.TgZ(1,"button",58),u.NdJ("click",function(){u.CHM(t);const e=u.oxw().$implicit,i=u.oxw(),o=u.MAs(81);return i.openCofirm(o,e)}),u.TgZ(2,"mat-icon"),u._uU(3,"delete_outline"),u.qZA(),u.qZA(),u.TgZ(4,"button",59),u.NdJ("click",function(){u.CHM(t);const e=u.oxw().$implicit,i=u.oxw(),o=u.MAs(83);return i.openCofirmUpdate(o,e)}),u.TgZ(5,"mat-icon"),u._uU(6,"create"),u.qZA(),u.qZA(),u.qZA()}}function H(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"td",50),u.TgZ(1,"button",56),u.NdJ("click",function(){const e=u.CHM(t).$implicit;return u.oxw().openDialog(e)}),u.TgZ(2,"mat-icon"),u._uU(3,"launch"),u.qZA(),u.qZA(),u.YNc(4,F,7,0,"span",57),u.qZA()}if(2&t){const t=e.$implicit,i=u.oxw();u.xp6(4),u.Q6J("ngIf",!t.delete&&i.isAdmin)}}function O(t,e){1&t&&u._UZ(0,"tr",60)}function $(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"tr",61),u.NdJ("click",function(){const e=u.CHM(t).$implicit;return u.oxw().selection.toggle(e)}),u.qZA()}}function E(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"div",62),u.TgZ(1,"h4",63),u._uU(2,"Confirm Delete"),u.qZA(),u.TgZ(3,"button",64),u.NdJ("click",function(){return u.CHM(t).$implicit.dismiss("Cross click")}),u.TgZ(4,"span",47),u._uU(5,"\xd7"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(6,"div",65),u.TgZ(7,"h5"),u._uU(8,"Are you sure to delete selected Partner."),u.qZA(),u.TgZ(9,"div",66),u.TgZ(10,"button",67),u.NdJ("click",function(){return u.CHM(t),u.oxw().deleteMember()}),u._uU(11,"Yes, Delete!"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(12,"div",68),u.TgZ(13,"button",69),u.NdJ("click",function(){return u.CHM(t).$implicit.close("Save click")}),u._uU(14,"Cancel"),u.qZA(),u.qZA()}}function R(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"div",62),u.TgZ(1,"h4",63),u._uU(2,"Confirm Update"),u.qZA(),u.TgZ(3,"button",64),u.NdJ("click",function(){return u.CHM(t).$implicit.dismiss("Cross click")}),u.TgZ(4,"span",47),u._uU(5,"\xd7"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(6,"div",65),u.TgZ(7,"h5"),u._uU(8,"Are you sure to Update selected Partner."),u.qZA(),u.TgZ(9,"div",66),u.TgZ(10,"button",70),u.NdJ("click",function(){return u.CHM(t),u.oxw().updateRole()}),u._uU(11,"Yes, Update!"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(12,"div",68),u.TgZ(13,"button",69),u.NdJ("click",function(){return u.CHM(t).$implicit.close("Save click")}),u._uU(14,"Cancel"),u.qZA(),u.qZA()}}const L=function(){return[5,10,20]},z=[{path:"",component:(()=>{class t{constructor(t,e,i,o,n,s,r,l){this.userService=t,this.projectService=e,this.route=i,this.dialog=o,this.modalService=n,this.jwtService=s,this.getStatus=r,this.formBuilder=l,this.arr2=new Array,this.listUsers=[],this.listUsersSearch=[],this.projectId=this.route.snapshot.params.id,this.isAdmin=!0,this.filter="all",this.displayedColumns=["stt","id","fullName","email","role","status","action"],this.selection=new a.Ov(!0,[]),this.alert=!1}closeAlert(){this.alert=!1}makeSearchForm(){this.formSearch=this.formBuilder.group({username:[""],fullname:[""],enail:[""],address:[""],phone:[""],role:[""]})}ngOnInit(){this.makeSearchForm(),this.role=this.jwtService.getRole(),"[ROLE_USER]"===this.role&&(this.isAdmin=!1),this.getData()}getData(){this.userService.getUsersInProject(this.projectId).subscribe(t=>{this.listUsers=t,console.log("member: ",this.listUsers),this.dataSource=new r.by(this.listUsers),this.dataSource.paginator=this.paginator})}getDataActive(){this.userService.getUsersActiveInProject(this.projectId).subscribe(t=>{this.listUsers=t,console.log("member: ",this.listUsers),this.dataSource=new r.by(this.listUsers),this.dataSource.paginator=this.paginator})}getDataDelete(){this.userService.getUsersDeletedInProject(this.projectId).subscribe(t=>{this.listUsers=t,console.log("member: ",this.listUsers),this.dataSource=new r.by(this.listUsers),this.dataSource.paginator=this.paginator})}onSearch(){let t=this.formSearch.value.username,e=this.formSearch.value.fullname,i=this.formSearch.value.enail,o=this.formSearch.value.phone,n=this.formSearch.value.role;console.log(this.projectId,t,e,i,o,n),this.userService.searchUsersInProject(this.projectId,t,e,i,o,n).subscribe(t=>{this.listUsers=t,console.log(t),this.dataSource=new r.by(this.listUsers),this.dataSource.paginator=this.paginator})}getAllUser(){"all"===this.filter&&this.getData(),"active"===this.filter&&this.getDataActive(),"delete"===this.filter&&this.getDataDelete(),this.makeSearchForm()}ngAfterViewInit(){this.dataSource.paginator=this.paginator}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(t=>this.selection.select(t))}applyFilter(t){this.dataSource.filter=t.trim().toLowerCase()}deleteMember(){this.projectService.deleteUserInProject(this.pe.id).subscribe(t=>{console.log(t),this.getData(),this.modalService.dismissAll()},t=>{console.log(t)}),console.log("delete")}openDialog(t){const e=new l.vA;e.disableClose=!0,e.autoFocus=!0,e.data=t.user,e.width="60%",this.dialog.open(c.V,e)}openCofirm(t,e){this.pe=e,console.log("confirm"),this.modalService.open(t,{centered:!0})}openCofirmUpdate(t,e){this.pe=e,console.log("confirm update",e),this.modalService.open(t,{centered:!0}),this.getData()}selectStatus(t){console.log(t.target.value),this.filter=t.target.value,"all"===this.filter&&this.getData(),"active"===this.filter&&this.getDataActive(),"delete"===this.filter&&this.getDataDelete()}updateRole(){this.userService.updateProjectEmployee(this.pe).subscribe(t=>{console.log("update",t),this.getData(),this.modalService.dismissAll()})}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(m.K),u.Y36(d.Y),u.Y36(n.gz),u.Y36(l.uw),u.Y36(g.FF),u.Y36(Z._),u.Y36(h.B),u.Y36(p.qu))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-members-in-project"]],viewQuery:function(t,e){if(1&t&&u.Gf(s.NW,5),2&t){let t;u.iGM(t=u.CRH())&&(e.paginator=t.first)}},decls:84,vars:9,consts:[[1,"content-wrapper"],[1,"container","p-30"],[1,"page-name"],[1,"row"],[1,"container"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],[1,"search-input"],[1,"col-12","search-group"],[3,"formGroup"],["appearance","fill"],["matInput","","formControlName","username"],["matInput","","formControlName","fullname"],["matInput","","formControlName","enail"],["matInput","","formControlName","phone"],["formControlName","role"],["value","","selected",""],["value","leader"],["value","dev"],[1,"btn","btn-primary","b-search",3,"click"],[1,"col-12"],["class","btn btn-success ",3,"routerLink",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"custom-select",2,"max-width","100px",3,"change"],["value","all","selected",""],["value","active"],["value","delete"],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","stt"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","fullName"],["matColumnDef","email"],["matColumnDef","role"],["mat-cell","","style","max-width:120px",4,"matCellDef"],["matColumnDef","status"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],[1,"mt-3"],[1,"btn","btn-secondary",3,"routerLink"],["confirmDelete",""],["confirmUpdate",""],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"btn","btn-success",3,"routerLink"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",2,"max-width","120px"],["matInput","","placeholder","Role","required","",3,"value","valueChange"],["value","admin"],["class","badge",3,"ngStyle",4,"ngIf"],[1,"badge",3,"ngStyle"],["mat-icon-button","",3,"click"],[4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],["mat-icon-button","","color","secondary",3,"click"],["mat-header-row",""],["mat-row","",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],[1,"modal-body"],[1,"text-center"],["data-dismiss","modal",1,"btn","btn-warning",3,"click"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(u.TgZ(0,"main",0),u.TgZ(1,"div",1),u.TgZ(2,"p",2),u._uU(3,"Members Of This Project"),u.qZA(),u.TgZ(4,"div",3),u.TgZ(5,"div",4),u.YNc(6,v,7,0,"div",5),u.TgZ(7,"div",3),u.TgZ(8,"div",6),u.TgZ(9,"div",3),u.TgZ(10,"div",7),u.TgZ(11,"form",8),u.TgZ(12,"mat-form-field",9),u.TgZ(13,"mat-label"),u._uU(14,"Username"),u.qZA(),u._UZ(15,"input",10),u.qZA(),u.TgZ(16,"mat-form-field",9),u.TgZ(17,"mat-label"),u._uU(18,"FullName"),u.qZA(),u._UZ(19,"input",11),u.qZA(),u.TgZ(20,"mat-form-field",9),u.TgZ(21,"mat-label"),u._uU(22,"Email"),u.qZA(),u._UZ(23,"input",12),u.qZA(),u.TgZ(24,"mat-form-field",9),u.TgZ(25,"mat-label"),u._uU(26,"Phone"),u.qZA(),u._UZ(27,"input",13),u.qZA(),u.TgZ(28,"mat-form-field",9),u.TgZ(29,"mat-select",14),u.TgZ(30,"mat-option",15),u._uU(31,"All"),u.qZA(),u.TgZ(32,"mat-option",16),u._uU(33,"Leader"),u.qZA(),u.TgZ(34,"mat-option",17),u._uU(35,"Dev"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(36,"button",18),u.NdJ("click",function(){return e.onSearch()}),u._uU(37,"Search"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(38,"div",19),u.YNc(39,_,2,1,"button",20),u.TgZ(40,"button",21),u.NdJ("click",function(){return e.getAllUser()}),u._uU(41,"All User"),u.qZA(),u.TgZ(42,"select",22),u.NdJ("change",function(t){return e.selectStatus(t)}),u.TgZ(43,"option",23),u._uU(44,"All"),u.qZA(),u.TgZ(45,"option",24),u._uU(46,"Active"),u.qZA(),u.TgZ(47,"option",25),u._uU(48,"Delete"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(49,"div",26),u.TgZ(50,"table",27),u.ynx(51,28),u.YNc(52,S,2,0,"th",29),u.YNc(53,C,2,1,"td",30),u.BQk(),u.ynx(54,31),u.YNc(55,w,2,0,"th",29),u.YNc(56,N,2,1,"td",30),u.BQk(),u.ynx(57,32),u.YNc(58,k,2,0,"th",29),u.YNc(59,x,2,1,"td",30),u.BQk(),u.ynx(60,33),u.YNc(61,D,2,0,"th",29),u.YNc(62,y,2,1,"td",30),u.BQk(),u.ynx(63,34),u.YNc(64,Y,2,0,"th",29),u.YNc(65,j,9,1,"td",35),u.BQk(),u.ynx(66,36),u.YNc(67,J,2,0,"th",29),u.YNc(68,P,3,2,"td",30),u.BQk(),u.ynx(69,37),u.YNc(70,B,2,0,"th",29),u.YNc(71,H,5,1,"td",30),u.BQk(),u.YNc(72,O,1,0,"tr",38),u.YNc(73,$,1,0,"tr",39),u.qZA(),u._UZ(74,"mat-paginator",40),u.qZA(),u._UZ(75,"br"),u._UZ(76,"br"),u.TgZ(77,"div",41),u.TgZ(78,"button",42),u._uU(79," Back "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(80,E,15,0,"ng-template",null,43,u.W1O),u.YNc(82,R,15,0,"ng-template",null,44,u.W1O)),2&t&&(u.xp6(6),u.Q6J("ngIf",e.alert),u.xp6(5),u.Q6J("formGroup",e.formSearch),u.xp6(28),u.Q6J("ngIf",e.isAdmin),u.xp6(11),u.Q6J("dataSource",e.dataSource),u.xp6(22),u.Q6J("matHeaderRowDef",e.displayedColumns),u.xp6(1),u.Q6J("matRowDefColumns",e.displayedColumns),u.xp6(1),u.Q6J("pageSizeOptions",u.DdM(8,L)),u.xp6(4),u.MGl("routerLink","/project-manager/p-details/",e.projectId,""))},directives:[o.O5,p._Y,p.JL,p.sg,f.KE,f.hX,A.Nt,p.Fj,p.JJ,p.u,T.gD,q.ey,p.YN,p.Kr,r.BZ,r.w1,r.fO,r.Dz,r.as,r.nj,s.NW,n.rH,r.ge,r.ev,o.PC,b.lW,U.Hw,r.XQ,r.Gk],styles:["table[_ngcontent-%COMP%]{width:100%}.search-input[_ngcontent-%COMP%]{margin:20px 0}.search-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px}table[_ngcontent-%COMP%], th.mat-header-cell[_ngcontent-%COMP%]{text-align:center}"]}),t})()}];let G=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[n.Bz.forChild(z)],n.Bz]}),t})();var K=i(4872);let W=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[o.ez,G,K.q,p.u5,p.UX]]}),t})()}}]);