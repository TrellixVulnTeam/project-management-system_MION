(self.webpackChunkfirst_project=self.webpackChunkfirst_project||[]).push([[421],{421:(t,e,i)=>{"use strict";i.r(e),i.d(e,{AddUsersModule:()=>P});var n=i(8583),o=i(4655),a=i(8345),r=i(4457),c=i(2789),l=i(2238),s=i(2153),u=i(7716),m=i(4981),d=i(9472),h=i(7573),p=i(674),g=i(3679),Z=i(8295),f=i(9983),A=i(7539),T=i(7441),q=i(2458),b=i(1095);function U(t,e){1&t&&(u.TgZ(0,"div",37),u.TgZ(1,"strong"),u._uU(2,"Success!"),u.qZA(),u._uU(3," Update Success!! "),u.TgZ(4,"button",38),u.TgZ(5,"span",39),u._uU(6,"\xd7"),u.qZA(),u.qZA(),u.qZA())}function S(t,e){1&t&&(u.TgZ(0,"h3"),u._uU(1,"Selected all users"),u.qZA())}function v(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"th",40),u.TgZ(1,"mat-checkbox",41),u.NdJ("change",function(e){u.CHM(t);const i=u.oxw();return e?i.masterToggle():null}),u.qZA(),u.qZA()}if(2&t){const t=u.oxw();u.xp6(1),u.Q6J("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())}}function _(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"td",42),u.TgZ(1,"mat-checkbox",43),u.NdJ("click",function(t){return t.stopPropagation()})("change",function(e){const i=u.CHM(t).$implicit,n=u.oxw();return e?n.selection.toggle(i):null}),u.qZA(),u.qZA()}if(2&t){const t=e.$implicit,i=u.oxw();u.xp6(1),u.Q6J("checked",i.selection.isSelected(t))}}function k(t,e){1&t&&(u.TgZ(0,"th",40),u._uU(1," Id "),u.qZA())}function C(t,e){if(1&t&&(u.TgZ(0,"td",42),u._uU(1),u.qZA()),2&t){const t=e.$implicit;u.xp6(1),u.hij(" ",t.id," ")}}function N(t,e){1&t&&(u.TgZ(0,"th",40),u._uU(1," User Name "),u.qZA())}function w(t,e){if(1&t&&(u.TgZ(0,"td",42),u._uU(1),u.qZA()),2&t){const t=e.$implicit;u.xp6(1),u.hij(" ",t.userName," ")}}function x(t,e){1&t&&(u.TgZ(0,"th",40),u._uU(1," Full Name "),u.qZA())}function y(t,e){if(1&t&&(u.TgZ(0,"td",42),u._uU(1),u.qZA()),2&t){const t=e.$implicit;u.xp6(1),u.hij(" ",t.fullName," ")}}function Y(t,e){1&t&&(u.TgZ(0,"th",40),u._uU(1," Email "),u.qZA())}function D(t,e){if(1&t&&(u.TgZ(0,"td",42),u._uU(1),u.qZA()),2&t){const t=e.$implicit;u.xp6(1),u.hij(" ",t.email," ")}}function j(t,e){1&t&&(u.TgZ(0,"th",40),u._uU(1," Role"),u.qZA())}function J(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"td",44),u.TgZ(1,"mat-form-field"),u.TgZ(2,"mat-select",45),u.NdJ("valueChange",function(e){return u.CHM(t).$implicit.pRole=e}),u.TgZ(3,"mat-option",46),u._uU(4,"Leader"),u.qZA(),u.TgZ(5,"mat-option",47),u._uU(6,"Developer"),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&t){const t=e.$implicit;u.xp6(2),u.Q6J("value",t.pRole)}}function M(t,e){1&t&&(u.TgZ(0,"th",40),u._uU(1," Action "),u.qZA())}function I(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"td",42),u.TgZ(1,"button",48),u.NdJ("click",function(){const e=u.CHM(t).$implicit;return u.oxw().openDialog(e)}),u._uU(2," Details "),u.qZA(),u.qZA()}}function R(t,e){1&t&&u._UZ(0,"tr",49)}function Q(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"tr",50),u.NdJ("click",function(){const e=u.CHM(t).$implicit;return u.oxw().selection.toggle(e)}),u.qZA()}}function F(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"div",51),u.TgZ(1,"h4",52),u._uU(2,"Confirm Delete"),u.qZA(),u.TgZ(3,"button",53),u.NdJ("click",function(){return u.CHM(t).$implicit.dismiss("Cross click")}),u.TgZ(4,"span",39),u._uU(5,"\xd7"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(6,"div",54),u.TgZ(7,"h5"),u._uU(8,"Are you sure you want to add Partner."),u.qZA(),u.TgZ(9,"div",55),u.TgZ(10,"button",56),u.NdJ("click",function(){return u.CHM(t),u.oxw().logSelection()}),u._uU(11,"Yes, Add!"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(12,"div",57),u.TgZ(13,"button",58),u.NdJ("click",function(){return u.CHM(t).$implicit.close("Save click")}),u._uU(14,"Cancel"),u.qZA(),u.qZA()}}const E=function(){return[5,10,20]},B=[{path:"",component:(()=>{class t{constructor(t,e,i,n,o,r,c,l){this.userService=t,this.projectService=e,this.route=i,this.router=n,this.dialog=o,this.jwt=r,this.modalService=c,this.formBuilder=l,this.arr2=new Array,this.arrPE=new Array,this.listUsers=[],this.listUsersSearch=[],this.projectId=this.route.snapshot.params.id,this.displayedColumns=["select","id","fullName","email","role","action"],this.selection=new a.Ov(!0,[]),this.alert=!1}closeAlert(){this.alert=!1}makeSearchForm(){this.formSearch=this.formBuilder.group({username:[""],fullname:[""],enail:[""],phone:[""]})}ngOnInit(){"[ROLE_USER]"===this.jwt.getRole()?this.router.navigate([""]):this.getData(),this.makeSearchForm()}getData(){this.userService.getNonPartner(this.projectId).subscribe(t=>{this.listUsers=t,console.log("member: ",t),this.listUsers.forEach(t=>{t.pRole="dev"}),this.dataSource=new c.by(this.listUsers),this.dataSource.paginator=this.paginator})}onSearch(){let t=this.formSearch.value.username,e=this.formSearch.value.fullname,i=this.formSearch.value.enail,n=this.formSearch.value.phone;console.log(this.projectId,t,e,i,n),this.userService.searchUsersNotInProject(this.projectId,t,e,i,n).subscribe(t=>{this.listUsersSearch=t,console.log(t),this.listUsersSearch.forEach(t=>{t.pRole="dev"}),this.dataSource=new c.by(this.listUsersSearch),this.dataSource.paginator=this.paginator})}getAllUser(){this.dataSource=new c.by(this.listUsers),this.dataSource.paginator=this.paginator,this.makeSearchForm()}ngAfterViewInit(){this.dataSource.paginator=this.paginator}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(t=>this.selection.select(t))}logSelection(){this.selection.selected.forEach(t=>{console.log(t.id,t.pRole),this.arr2.push({user:t,role:t.pRole,projectId:this.projectId})}),this.saveRole(this.arr2),this.modalService.dismissAll()}saveRole(t){this.projectService.postRole(t).subscribe(t=>{console.log("ADD User seccess"),this.alert=!0,this.arr2=[],this.ngOnInit()})}openDetails(t){console.log(t)}openDialog(t){const e=new l.vA;e.disableClose=!0,e.autoFocus=!0,e.data=t,e.width="60%",this.dialog.open(s.V,e)}openCofirm(t){console.log("confirm"),this.modalService.open(t,{centered:!0})}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(m.K),u.Y36(d.Y),u.Y36(o.gz),u.Y36(o.F0),u.Y36(l.uw),u.Y36(h._),u.Y36(p.FF),u.Y36(g.qu))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-add-users"]],viewQuery:function(t,e){if(1&t&&u.Gf(r.NW,5),2&t){let t;u.iGM(t=u.CRH())&&(e.paginator=t.first)}},decls:71,vars:10,consts:[[1,"content-wrapper"],[1,"container","p-30"],[1,"page-name"],[1,"row"],[1,"container"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],[1,"search-input"],[1,"col-12","search-group"],[3,"formGroup"],["appearance","fill"],["matInput","","formControlName","username"],["matInput","","formControlName","fullname"],["matInput","","formControlName","enail"],["matInput","","formControlName","phone"],[1,"btn","btn-primary","b-search",3,"click"],[1,"col-12"],[1,"btn","btn-primary",3,"routerLink"],["type","button",1,"btn","btn-secondary",3,"click"],[4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","userName"],["matColumnDef","fullName"],["matColumnDef","email"],["matColumnDef","role"],["mat-cell","","style","max-width:50px",4,"matCellDef"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],[1,"btn","btn-primary",2,"margin","20px",3,"click"],[1,"btn","btn-secondary",3,"routerLink"],["confirmSave",""],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close"],["aria-hidden","true"],["mat-header-cell",""],[3,"checked","indeterminate","change"],["mat-cell",""],[3,"checked","click","change"],["mat-cell","",2,"max-width","50px"],["matInput","","placeholder","Role","required","",3,"value","valueChange"],["value","leader"],["value","dev"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],["mat-header-row",""],["mat-row","",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],[1,"modal-body"],[1,"text-center"],["data-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"]],template:function(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"main",0),u.TgZ(1,"div",1),u.TgZ(2,"p",2),u._uU(3,"Add Users To This Project"),u.qZA(),u.TgZ(4,"div",3),u.TgZ(5,"div",4),u.YNc(6,U,7,0,"div",5),u.TgZ(7,"div",3),u.TgZ(8,"div",6),u.TgZ(9,"div",3),u.TgZ(10,"div",7),u.TgZ(11,"form",8),u.TgZ(12,"mat-form-field",9),u.TgZ(13,"mat-label"),u._uU(14,"Username"),u.qZA(),u._UZ(15,"input",10),u.qZA(),u.TgZ(16,"mat-form-field",9),u.TgZ(17,"mat-label"),u._uU(18,"FullName"),u.qZA(),u._UZ(19,"input",11),u.qZA(),u.TgZ(20,"mat-form-field",9),u.TgZ(21,"mat-label"),u._uU(22,"Email"),u.qZA(),u._UZ(23,"input",12),u.qZA(),u.TgZ(24,"mat-form-field",9),u.TgZ(25,"mat-label"),u._uU(26,"Phone"),u.qZA(),u._UZ(27,"input",13),u.qZA(),u.TgZ(28,"button",14),u.NdJ("click",function(){return e.onSearch()}),u._uU(29,"Search"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(30,"div",15),u.TgZ(31,"button",16),u._uU(32," All Member "),u.qZA(),u.TgZ(33,"button",17),u.NdJ("click",function(){return e.getAllUser()}),u._uU(34,"All NonMember "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(35,S,2,0,"h3",18),u.TgZ(36,"div",19),u.TgZ(37,"table",20),u.ynx(38,21),u.YNc(39,v,2,2,"th",22),u.YNc(40,_,2,1,"td",23),u.BQk(),u.ynx(41,24),u.YNc(42,k,2,0,"th",22),u.YNc(43,C,2,1,"td",23),u.BQk(),u.ynx(44,25),u.YNc(45,N,2,0,"th",22),u.YNc(46,w,2,1,"td",23),u.BQk(),u.ynx(47,26),u.YNc(48,x,2,0,"th",22),u.YNc(49,y,2,1,"td",23),u.BQk(),u.ynx(50,27),u.YNc(51,Y,2,0,"th",22),u.YNc(52,D,2,1,"td",23),u.BQk(),u.ynx(53,28),u.YNc(54,j,2,0,"th",22),u.YNc(55,J,7,1,"td",29),u.BQk(),u.ynx(56,30),u.YNc(57,M,2,0,"th",22),u.YNc(58,I,3,0,"td",23),u.BQk(),u.YNc(59,R,1,0,"tr",31),u.YNc(60,Q,1,0,"tr",32),u.qZA(),u._UZ(61,"mat-paginator",33),u.qZA(),u._UZ(62,"br"),u._UZ(63,"br"),u.TgZ(64,"div"),u.TgZ(65,"button",34),u.NdJ("click",function(){u.CHM(t);const i=u.MAs(70);return e.openCofirm(i)}),u._uU(66," Save "),u.qZA(),u.TgZ(67,"button",35),u._uU(68," Back "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(69,F,15,0,"ng-template",null,36,u.W1O)}2&t&&(u.xp6(6),u.Q6J("ngIf",e.alert),u.xp6(5),u.Q6J("formGroup",e.formSearch),u.xp6(20),u.MGl("routerLink","/project-manager/members/",e.projectId,""),u.xp6(4),u.Q6J("ngIf",0===e.dataSource.data.length),u.xp6(2),u.Q6J("dataSource",e.dataSource),u.xp6(22),u.Q6J("matHeaderRowDef",e.displayedColumns),u.xp6(1),u.Q6J("matRowDefColumns",e.displayedColumns),u.xp6(1),u.Q6J("pageSizeOptions",u.DdM(9,E)),u.xp6(6),u.MGl("routerLink","/project-manager/p-details/",e.projectId,""))},directives:[n.O5,g._Y,g.JL,g.sg,Z.KE,Z.hX,f.Nt,g.Fj,g.JJ,g.u,o.rH,c.BZ,c.w1,c.fO,c.Dz,c.as,c.nj,r.NW,c.ge,A.oG,c.ev,T.gD,q.ey,b.lW,c.XQ,c.Gk],styles:["table[_ngcontent-%COMP%]{width:100%}.search-input[_ngcontent-%COMP%]{margin:20px 0}.search-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px}table[_ngcontent-%COMP%], th.mat-header-cell[_ngcontent-%COMP%]{text-align:center}"]}),t})()}];let O=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[o.Bz.forChild(B)],o.Bz]}),t})();var H=i(4872);let P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[n.ez,O,H.q,g.u5,g.UX]]}),t})()}}]);